import"./chunk-C6Q5SG76.js";var E=function(e){return e.csv="text/csv",e.tsv="text/tab-separated-values",e.plain="text/plain",e}(E||{}),u=e=>e,a=e=>e,d=u,p=u,l=u,w=u,x=u,T={fieldSeparator:",",decimalSeparator:".",quoteStrings:!0,quoteCharacter:'"',showTitle:!1,title:"My Generated Report",filename:"generated",showColumnHeaders:!0,useTextFile:!1,fileExtension:"csv",mediaType:E.csv,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:"TRUE",false:"FALSE"},replaceUndefinedWith:""},j=`\r
`,q="\uFEFF",g=e=>Object.assign({},T,e),h=class extends Error{constructor(t){super(t),this.name="CsvGenerationError"}},y=class extends Error{constructor(t){super(t),this.name="EmptyHeadersError"}},m=class extends Error{constructor(t){super(t),this.name="CsvDownloadEnvironmentError"}},b=class extends Error{constructor(t){super(t),this.name="UnsupportedDataFormatError"}},A=function(e,t){return t=='"'&&e.indexOf('"')>-1?e.replace(/"/g,'""'):e},H=e=>w(typeof e=="object"?e.key:e),U=e=>x(typeof e=="object"?e.displayLabel:e),k=(e,...t)=>t.reduce((r,n)=>n(r),e),D=e=>t=>e.useBom?p(a(t)+q):t,B=e=>t=>e.showTitle?v(p(a(t)+e.title))(l("")):t,v=e=>t=>p(a(e)+a(t)+j),S=e=>(t,r)=>L(e)(l(a(t)+a(r))),L=e=>t=>u(a(t)+e.fieldSeparator),R=(e,t)=>r=>{if(!e.showColumnHeaders)return r;if(t.length<1)throw new y("Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.");let n=l("");for(let o=0;o<t.length;o++){let i=U(t[o]);n=S(e)(n,C(e,a(i)))}return n=l(a(n).slice(0,-1)),v(r)(n)},M=(e,t,r)=>n=>{let o=n;for(var i=0;i<r.length;i++){let s=l("");for(let f=0;f<t.length;f++){let O=H(t[f]),F=r[i][a(O)];s=S(e)(s,C(e,F))}s=l(a(s).slice(0,-1)),o=v(o)(s)}return o},N=a,G=e=>+e===e&&(!isFinite(e)||!!(e%1)),I=(e,t)=>{if(G(t)){if(e.decimalSeparator==="locale")return d(t.toLocaleString());if(e.decimalSeparator)return d(t.toString().replace(".",e.decimalSeparator))}return d(t.toString())},c=(e,t)=>{let r=t;return(e.quoteStrings||e.fieldSeparator&&t.indexOf(e.fieldSeparator)>-1||e.quoteCharacter&&t.indexOf(e.quoteCharacter)>-1||t.indexOf(`
`)>-1||t.indexOf("\r")>-1)&&(r=e.quoteCharacter+A(t,e.quoteCharacter)+e.quoteCharacter),d(r)},V=(e,t)=>{let r=t?"true":"false";return d(e.boolDisplay[r])},z=(e,t)=>typeof t>"u"&&e.replaceUndefinedWith!==void 0?c(e,e.replaceUndefinedWith+""):t===null?c(e,"null"):c(e,""),C=(e,t)=>{if(typeof t=="number")return I(e,t);if(typeof t=="string")return c(e,t);if(typeof t=="boolean"&&e.boolDisplay)return V(e,t);if(t===null||typeof t>"u")return z(e,t);throw new b(`
    typeof ${typeof t} isn't supported. Only number, string, boolean, null and undefined are supported.
    Please convert the data in your object to one of those before generating the CSV.
    `)},Q=e=>t=>{let r=g(e),n=r.useKeysAsHeaders?Object.keys(t[0]):r.columnHeaders,o=k(p(""),D(r),B(r),R(r,n),M(r,n,t));if(a(o).length<1)throw new h("Output is empty. Is your data formatted correctly?");return o},K=e=>t=>{let r=g(e),n=a(t),o=r.useTextFile?"text/plain":r.mediaType;return new Blob([n],{type:`${o};charset=utf8;`})},X=e=>t=>{if(!window)throw new m("Downloading only supported in a browser environment.");let r=K(e)(t),n=g(e),o=n.useTextFile?"txt":n.fileExtension,i=`${n.filename}.${o}`,s=document.createElement("a");s.download=i,s.href=URL.createObjectURL(r),s.setAttribute("visibility","hidden"),document.body.appendChild(s),s.click(),document.body.removeChild(s)};export{E as MediaType,K as asBlob,N as asString,X as download,Q as generateCsv,g as mkConfig};
