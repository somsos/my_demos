import{a as at,b as Z,c as lt,d as ct,e as dt,f as pt,g as mt,h as ut,i as ht,j as ft,k as Y,l as z,m as gt,q as _t,r as yt,z as B}from"./chunk-7FQMXHVX.js";import{a as we,b as et,c as tt,d as E,f as nt,g as ie,h as oe,i as it,j as ot,l as rt,n as be,o as st}from"./chunk-JTN6Z4EA.js";import{A as x,B as fe,Ba as l,C as Ne,Ca as c,D as Fe,Da as k,Ea as S,G as f,H as g,I as Q,Ia as m,J as He,Ja as p,L as J,M as Le,N as j,O as V,P as ge,Qa as Ze,R as W,Ra as u,S as je,Sa as ve,T as _e,Ta as Ye,U as Ve,Ua as ne,V as ee,Va as xe,W as We,Wa as qe,X as ye,Xa as Xe,Y as ze,Z as Be,Za as Ke,aa as $,ba as b,bb as Qe,ca as G,d as Ae,ea as te,eb as Je,g as ke,ha as Ue,ka as P,la as D,qa as M,u as L,ua as $e,va as Ge,w as v,x as I,xa as w,y as U,z as y}from"./chunk-2NPV4RVZ.js";import{a as he,b as Oe}from"./chunk-C6Q5SG76.js";var Ce=class extends tt{supportsDOMEvents=!0},Se=class o extends Ce{static makeCurrent(){et(new o)}onAndCancel(t,e,n,i){return t.addEventListener(e,n,i),()=>{t.removeEventListener(e,n,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=kt();return e==null?null:Nt(e)}resetBaseElement(){q=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return nt(document.cookie,t)}},q=null;function kt(){return q=q||document.querySelector("base"),q?q.getAttribute("href"):null}function Nt(o){return new URL(o,document.baseURI).pathname}var Ft=(()=>{class o{build(){return new XMLHttpRequest}static \u0275fac=function(n){return new(n||o)};static \u0275prov=v({token:o,factory:o.\u0275fac})}return o})(),Ee=new U(""),Mt=(()=>{class o{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,n){this._zone=n,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,i,r){return this._findPluginFor(n).addEventListener(e,n,i,r)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(r=>r.supports(e)),!n)throw new L(5101,!1);return this._eventNameToPlugin.set(e,n),n}static \u0275fac=function(n){return new(n||o)(y(Ee),y(V))};static \u0275prov=v({token:o,factory:o.\u0275fac})}return o})(),se=class{_doc;constructor(t){this._doc=t}manager},re="ng-app-id";function vt(o){for(let t of o)t.remove()}function xt(o,t){let e=t.createElement("style");return e.textContent=o,e}function Ht(o,t,e,n){let i=o.head?.querySelectorAll(`style[${re}="${t}"],link[${re}="${t}"]`);if(i)for(let r of i)r.removeAttribute(re),r instanceof HTMLLinkElement?n.set(r.href.slice(r.href.lastIndexOf("/")+1),{usage:0,elements:[r]}):r.textContent&&e.set(r.textContent,{usage:0,elements:[r]})}function Ie(o,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",o),e}var Ct=(()=>{class o{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,n,i,r={}){this.doc=e,this.appId=n,this.nonce=i,this.isServer=be(r),Ht(e,n,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,n){for(let i of e)this.addUsage(i,this.inline,xt);n?.forEach(i=>this.addUsage(i,this.external,Ie))}removeStyles(e,n){for(let i of e)this.removeUsage(i,this.inline);n?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,n,i){let r=n.get(e);r?r.usage++:n.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,n){let i=n.get(e);i&&(i.usage--,i.usage<=0&&(vt(i.elements),n.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])vt(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[n,{elements:i}]of this.inline)i.push(this.addElement(e,xt(n,this.doc)));for(let[n,{elements:i}]of this.external)i.push(this.addElement(e,Ie(n,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,n){return this.nonce&&n.setAttribute("nonce",this.nonce),this.isServer&&n.setAttribute(re,this.appId),e.appendChild(n)}static \u0275fac=function(n){return new(n||o)(y(E),y(_e),y(ye,8),y(ee))};static \u0275prov=v({token:o,factory:o.\u0275fac})}return o})(),Me={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Te=/%COMP%/g;var St="%COMP%",Lt=`_nghost-${St}`,jt=`_ngcontent-${St}`,Vt=!0,Wt=new U("",{providedIn:"root",factory:()=>Vt});function zt(o){return jt.replace(Te,o)}function Bt(o){return Lt.replace(Te,o)}function Et(o,t){return t.map(e=>e.replace(Te,o))}var ae=(()=>{class o{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,n,i,r,s,a,d,h=null,_=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=i,this.removeStylesOnCompDestroy=r,this.doc=s,this.platformId=a,this.ngZone=d,this.nonce=h,this.tracingService=_,this.platformIsServer=be(a),this.defaultRenderer=new X(e,s,d,this.platformIsServer,this.tracingService)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===$.ShadowDom&&(n=Oe(he({},n),{encapsulation:$.Emulated}));let i=this.getOrCreateRenderer(e,n);return i instanceof le?i.applyToHost(e):i instanceof K&&i.applyStyles(),i}getOrCreateRenderer(e,n){let i=this.rendererByCompId,r=i.get(n.id);if(!r){let s=this.doc,a=this.ngZone,d=this.eventManager,h=this.sharedStylesHost,_=this.removeStylesOnCompDestroy,A=this.platformIsServer,R=this.tracingService;switch(n.encapsulation){case $.Emulated:r=new le(d,h,n,this.appId,_,s,a,A,R);break;case $.ShadowDom:return new De(d,h,e,n,s,a,this.nonce,A,R);default:r=new K(d,h,n,_,s,a,A,R);break}i.set(n.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(n){return new(n||o)(y(Mt),y(Ct),y(_e),y(Wt),y(E),y(ee),y(V),y(ye),y(ze,8))};static \u0275prov=v({token:o,factory:o.\u0275fac})}return o})(),X=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,n,i,r){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=i,this.tracingService=r}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Me[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(wt(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(wt(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){e.remove()}selectRootElement(t,e){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new L(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;let r=Me[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){let i=Me[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(G.DashCase|G.Important)?t.style.setProperty(e,n,i&G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t!=null&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n,i){if(typeof t=="string"&&(t=we().getGlobalEventTarget(this.doc,t),!t))throw new L(5102,!1);let r=this.decoratePreventDefault(n);return this.tracingService?.wrapEventListener&&(r=this.tracingService.wrapEventListener(t,e,r)),this.eventManager.addEventListener(t,e,r,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function wt(o){return o.tagName==="TEMPLATE"&&o.content!==void 0}var De=class extends X{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,n,i,r,s,a,d,h){super(t,r,s,d,h),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let _=i.styles;_=Et(i.id,_);for(let R of _){let H=document.createElement("style");a&&H.setAttribute("nonce",a),H.textContent=R,this.shadowRoot.appendChild(H)}let A=i.getExternalStyles?.();if(A)for(let R of A){let H=Ie(R,r);a&&H.setAttribute("nonce",a),this.shadowRoot.appendChild(H)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},K=class extends X{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,n,i,r,s,a,d,h){super(t,r,s,a,d),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let _=n.styles;this.styles=h?Et(h,_):_,this.styleUrls=n.getExternalStyles?.(h)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},le=class extends K{contentAttr;hostAttr;constructor(t,e,n,i,r,s,a,d,h){let _=i+"-"+n.id;super(t,e,n,r,s,a,d,h,_),this.contentAttr=zt(_),this.hostAttr=Bt(_)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}},Ut=(()=>{class o extends se{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,i,r){return e.addEventListener(n,i,r),()=>this.removeEventListener(e,n,i,r)}removeEventListener(e,n,i,r){return e.removeEventListener(n,i,r)}static \u0275fac=function(n){return new(n||o)(y(E))};static \u0275prov=v({token:o,factory:o.\u0275fac})}return o})(),bt=["alt","control","meta","shift"],$t={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gt={alt:o=>o.altKey,control:o=>o.ctrlKey,meta:o=>o.metaKey,shift:o=>o.shiftKey},Zt=(()=>{class o extends se{constructor(e){super(e)}supports(e){return o.parseEventName(e)!=null}addEventListener(e,n,i,r){let s=o.parseEventName(n),a=o.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>we().onAndCancel(e,s.domEventName,a,r))}static parseEventName(e){let n=e.toLowerCase().split("."),i=n.shift();if(n.length===0||!(i==="keydown"||i==="keyup"))return null;let r=o._normalizeKey(n.pop()),s="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),s="code."),bt.forEach(h=>{let _=n.indexOf(h);_>-1&&(n.splice(_,1),s+=h+".")}),s+=r,n.length!=0||r.length===0)return null;let d={};return d.domEventName=i,d.fullKey=s,d}static matchEventFullKeyCode(e,n){let i=$t[e.key]||e.key,r="";return n.indexOf("code.")>-1&&(i=e.code,r="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),bt.forEach(s=>{if(s!==i){let a=Gt[s];a(e)&&(r+=s+".")}}),r+=i,r===n)}static eventCallback(e,n,i){return r=>{o.matchEventFullKeyCode(r,e)&&i.runGuarded(()=>n(r))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(n){return new(n||o)(y(E))};static \u0275prov=v({token:o,factory:o.\u0275fac})}return o})();function It(o,t){return Qe(he({rootComponent:o},Yt(t)))}function Yt(o){return{appProviders:[...Jt,...o?.providers??[]],platformProviders:Qt}}function qt(){Se.makeCurrent()}function Xt(){return new ge}function Kt(){return je(document),document}var Qt=[{provide:ee,useValue:rt},{provide:Ve,useValue:qt,multi:!0},{provide:E,useFactory:Kt,deps:[]}];var Jt=[{provide:Fe,useValue:"root"},{provide:ge,useFactory:Xt,deps:[]},{provide:Ee,useClass:Ut,multi:!0,deps:[E]},{provide:Ee,useClass:Zt,multi:!0,deps:[E]},ae,Ct,Mt,{provide:te,useExisting:ae},{provide:st,useClass:Ft,deps:[]},[]];var en="@",tn=(()=>{class o{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=x(J);loadingSchedulerFn=x(nn,{optional:!0});_engine;constructor(e,n,i,r,s){this.doc=e,this.delegate=n,this.zone=i,this.animationType=r,this.moduleImpl=s}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-RUGDXGD3.js").then(i=>i),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(e):n=e(),n.catch(i=>{throw new L(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:r})=>{this._engine=i(this.animationType,this.doc);let s=new r(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(e,n){let i=this.delegate.createRenderer(e,n);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let r=new Re(i);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let a=s.createRenderer(e,n);r.use(a),this.scheduler??=this.injector.get(Le,null,{optional:!0}),this.scheduler?.notify(10)}).catch(s=>{r.use(i)}),r}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(n){Ue()};static \u0275prov=v({token:o,factory:o.\u0275fac})}return o})(),Re=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,n,i){this.delegate.insertBefore(t,e,n,i)}removeChild(t,e,n){this.delegate.removeChild(t,e,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,i){this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){this.shouldReplay(e)&&this.replay.push(i=>i.setProperty(t,e,n)),this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n,i){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,n,i)),this.delegate.listen(t,e,n,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(en)}},nn=new U("");function Dt(o="animations"){return Be("NgAsyncAnimations"),fe([{provide:te,useFactory:(t,e,n)=>new tn(t,e,n,o),deps:[E,ae,V]},{provide:We,useValue:o==="noop"?"NoopAnimations":"BrowserAnimations"}])}var N=class o{static csvConf={useKeysAsHeaders:!0,quoteCharacter:"",fieldSeparator:","};async resultsToCsv(t,e){let n=this._parceResults(t,e);import("./chunk-4UTBWCBA.js").then(i=>{let r=i.mkConfig(o.csvConf),s=i.generateCsv(r)(n);i.download(r)(s)})}_parceResults(t,e){if(t.MWDs.length!==t.soilPortions.length||t.soilPortions.length!==t.tamizDiameterProm.length)throw new Error("Resultados con mal formato: intente mas tarde");let n=[];for(let i=0;i<Array.from(e.keys()).length;i++){let r={soilWeight:e.get(i).soilWeight.toFixed(6),tamizDiameter:e.get(i).tamizDiameter.toFixed(6),tamizDiam:t.tamizDiameterProm[i]?.toFixed(6)??void 0,soilPortions:t.soilPortions[i]?.toFixed(6)??void 0,MWDs:t.MWDs[i]?.toFixed(6)??void 0};n.push(r)}return n[0].totalSoil=t.totalSoilWeight.toFixed(6),n[0].MWDTotal=t.MWDTotal,n}static \u0275fac=function(e){return new(e||o)};static \u0275prov=v({token:o,factory:o.\u0275fac,providedIn:"root"})};var O=class o{static getEmptyResults(){return{MWDTotal:-1,totalSoilWeight:-1,MWDs:[],soilPortions:[],tamizDiameterProm:[]}}static cleanResults(t){t=o.getEmptyResults()}static itHasProcessedData(t){return t.MWDTotal!==-1||t.totalSoilWeight!==-1||t.MWDs.length<=0||t.soilPortions.length<=0||t.tamizDiameterProm.length<=0}static areEquals(t,e){if(t.totalSoilWeight!==e.totalSoilWeight)return!1;for(let i=0;i<t.tamizDiameterProm.length;i++){let r=Number(t.tamizDiameterProm[i].toFixed(3)),s=e.tamizDiameterProm[i];if(r!==s)return!1}for(let i=0;i<t.soilPortions.length;i++){let r=t.soilPortions[i],s=e.soilPortions[i];if(r!==s)return!1}for(let i=0;i<t.MWDs.length;i++){let r=t.MWDs[i].toFixed(7),s=e.MWDs[i].toFixed(7);if(r!==s)throw new Error("Value expected and got different")}if(Number(t.MWDTotal.toFixed(2))!==e.MWDTotal)throw new Error("Value expected and got different");return!1}};var ce=class o{_samplesRows;_results=O.getEmptyResults();static precision=9;setData(t){this._samplesRows=t,this._adustPrecisionSample(),O.itHasProcessedData(this._results)&&O.cleanResults(this._results)}calcTotalSoilWeight(){if(this._results.totalSoilWeight!=-1)return this._results.totalSoilWeight;let t=0;return this._getSoilWeights().forEach(n=>{t=t+n}),this._results.totalSoilWeight=t,this._results.totalSoilWeight}calcTamizDiameterProm(){if(this._results.tamizDiameterProm.length!==0)return this._results.tamizDiameterProm;let t=[],e=this._getTamizDiameters();for(let n=0;n<e.length-1;n++){let i=e[n],r=e[n+1],a=(i+r)/2;t.push(a)}return this._results.tamizDiameterProm=t,this._results.tamizDiameterProm}calcSoilPortions(){if(this._results.soilPortions.length!==0)return this._results.soilPortions;let t=this._getSoilWeights();t.shift();let e=this.calcTotalSoilWeight(),n=t.map(i=>{let r=i/e;return this._adustPrecision(Number(r.toFixed(9)))});return this._results.soilPortions=n,this._results.soilPortions}calcMWDs(){if(this._results.MWDs.length!==0)return this._results.MWDs;let t=this.calcTamizDiameterProm(),e=this.calcSoilPortions();if(t.length!=e.length)throw new Error("unexpected: soilWeights.length != soilPortions.length");let n=[];for(let i=0;i<t.length;i++){let r=t[i],s=e[i],a=r*s,d=this._adustPrecision(a);n.push(d)}return this._results.MWDs=n,this._results.MWDs}calcMWDTotal(){if(this._results.MWDTotal!=-1)return this._results.MWDTotal;let t=this.calcMWDs(),e=0;for(let n=0;n<t.length;n++)e=e+t[n];return this._results.MWDTotal=e,this._results.MWDTotal}_getTamizDiameters(){return Array.from(this._samplesRows.values()).map(e=>e.tamizDiameter)}_getSoilWeights(){return Array.from(this._samplesRows.values()).map(e=>e.soilWeight)}_adustPrecision(t){return Number(t.toFixed(o.precision))}_adustPrecisionSample(){this._samplesRows.values()}getResults(){let t=O.getEmptyResults();return Object.assign(t,this._results),t}};var T=class o{resolveSamples(t){let e=new ce;return e.setData(t),e.calcTotalSoilWeight(),e.calcTamizDiameterProm(),e.calcSoilPortions(),e.calcMWDs(),e.calcMWDTotal(),e.getResults()}async parseFileToSamples(t){return new Promise(async(n,i)=>{let r=await import("./chunk-LXHA67IG.js");new r.Papa().parse(t,{complete:(a,d)=>{let h=this._parseDataFileToSample(a.data);n(h)},error:a=>{i(a)}})})}_parseDataFileToSample(t){let n=t.map(r=>r.slice(0,2));isNaN(Number(n[0][0]))&&(console.log("has header"),n.shift());let i=new Map;for(let r=0;r<n.length-1;r++){let s=n[r],a=Number(s[0]);if(isNaN(a))throw new Error("bad format in: '"+s[0]+"'");let d=Number(s[1]);if(isNaN(d))throw new Error("bad format in: '"+s[1]+"'");i.set(r,{soilWeight:a,tamizDiameter:d})}return i}static \u0275fac=function(e){return new(e||o)};static \u0275prov=v({token:o,factory:o.\u0275fac})};var de=class o{getOutputDriver(){return new N}getInputDriver(){return new T}static \u0275fac=function(e){return new(e||o)};static \u0275mod=D({type:o});static \u0275inj=I({providers:[N,T]})};var Tt={providers:[Ke(),Ne(de),Dt("noop")]};var F=class o{_allSamples$=new Ae([this.getExample()]);addSamplesRecord(t){t.createdAt===void 0&&(t.createdAt=new Date),!this._doesSampleExist(t)&&this._allSamples$.next([...this._allSamples$.value,t])}_doesSampleExist(t){let e=t.result;return e===0||e===void 0?!0:this._allSamples$.value.some(i=>i.result===e)}getSamplesByItem(t){return this._allSamples$.value[t].sample}observeAllSamplesRecords(){return this._allSamples$.asObservable()}cleanAll(){this._allSamples$.next([this.getExample()])}cleanOne(t){let e=this._allSamples$.value;if(t<0||t>=e.length)throw new Error("Index out of bounds");e.splice(t,1),this._allSamples$.next(e)}getExample(){return{sample:new Map([[0,{tamizDiameter:8,soilWeight:0}],[1,{tamizDiameter:4,soilWeight:3.4}],[2,{tamizDiameter:2,soilWeight:21.26}],[3,{tamizDiameter:1,soilWeight:34.73}],[4,{tamizDiameter:.5,soilWeight:35.69}],[5,{tamizDiameter:.25,soilWeight:31.31}],[6,{tamizDiameter:.053,soilWeight:38.26}],[7,{tamizDiameter:0,soilWeight:25.37}]]),result:.953859829,createdAt:new Date("2025-04-07T18:50:00-06:00")}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=v({token:o,factory:o.\u0275fac,providedIn:"root"})};var Rt=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=D({type:o});static \u0275inj=I({})}return o})();var Pt=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=D({type:o});static \u0275inj=I({imports:[Y,Rt,_t]})}return o})();var Pe=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=D({type:o});static \u0275inj=I({imports:[Y,Y]})}return o})();function pn(o,t){if(o&1){let e=S();Q(),l(0,"svg",16),m("click",function(i){f(e);let r=p().index;return p(3).onClickCleanOne(r),g(i.stopPropagation())}),k(1,"path",17),c()}}function mn(o,t){if(o&1){let e=S();l(0,"div",13)(1,"div",14),m("click",function(){let i=f(e).index,r=p(3);return g(r.onRecordClick(i))}),l(2,"div",11),u(3),xe(4,"date"),c(),l(5,"div"),u(6),M(7,pn,2,0,"svg",15),c(),l(8,"div"),u(9),c()()()}if(o&2){let e=t.$implicit,n=t.index;b(3),ve(Xe(4,4,e.createdAt,"short")),b(3),Ye(" ",n===0?"Ejemplo":n," "),b(),w("ngIf",n!==0),b(2),ve(e.result)}}function un(o,t){if(o&1&&(l(0,"div",9)(1,"div",10)(2,"div",11),u(3,"Agregado"),c(),l(4,"div"),u(5,"Nombre"),c(),l(6,"div"),u(7,"Resultado"),c()(),M(8,mn,10,7,"div",12),c()),o&2){let e=p().ngIf;b(8),w("ngForOf",e)}}function hn(o,t){if(o&1){let e=S();l(0,"div",1)(1,"div",2)(2,"button",3),m("click",function(){f(e);let i=p();return g(i.onClickBackFromHistory())}),Q(),l(3,"svg",4),k(4,"path",5),c()(),He(),l(5,"h4"),u(6,"Historial"),c()(),M(7,un,9,1,"div",6),l(8,"div",7)(9,"button",8),m("click",function(){f(e);let i=p();return g(i.onClickBackFromHistory())}),u(10,"Regresar"),c()()()}if(o&2){let e=t.ngIf;b(7),w("ngIf",e.length>0)}}var pe=class o{recordClick=new j;backFromHistory=new j;_srv=x(F);panelOpenState=W(!1);history$=this._srv.observeAllSamplesRecords().pipe(ke(t=>t.map(e=>e)));onClickClean(){this._srv.cleanAll()}onClickCleanOne(t){this._srv.cleanOne(t)}onRecordClick(t){let e=this._srv.getSamplesByItem(t);this.recordClick.emit(e),this.backFromHistory.emit()}onClickBackFromHistory(){this.backFromHistory.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["mwd-history"]],outputs:{recordClick:"recordClick",backFromHistory:"backFromHistory"},decls:2,vars:3,consts:[["class","history-container",4,"ngIf"],[1,"history-container"],[1,"history-header"],["mat-button","",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","26","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-left"],["fill-rule","evenodd","d","M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"],["class","history-list",4,"ngIf"],[1,"btn-group"],["mat-raised-button","",3,"click"],[1,"history-list"],[1,"history-row","history-itemHeader"],[2,"min-width","140px"],["class","history-row-container",4,"ngFor","ngForOf"],[1,"history-row-container"],[1,"history-row","history-item",3,"click"],["style","margin-left: 5px;","xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-trash3","viewBox","0 0 16 16",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash3",2,"margin-left","5px",3,"click"],["d","M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"]],template:function(e,n){e&1&&(M(0,hn,11,1,"div",0),xe(1,"async")),e&2&&w("ngIf",qe(1,1,n.history$))},dependencies:[B,ie,oe,z,it,ot,Pt,gt,Pe],styles:[".history-container[_ngcontent-%COMP%]{padding:1rem;background-color:#f9f9f9;max-width:500px;margin:0 auto;margin-bottom:1rem}@media (width >= 800px){.history-container[_ngcontent-%COMP%]{min-width:400px}}.history-container[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]{display:flex;justify-items:center;height:50px}.history-container[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:min-content}.history-container[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:#333;height:min-content}.history-container[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{gap:.5rem}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;max-height:300px;overflow-y:auto;border:1px solid #ccc;border-radius:8px;background-color:#fff}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-row[_ngcontent-%COMP%]{padding:5px;display:flex;justify-content:space-between}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-last-of-type(1){text-align:right}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-itemHeader[_ngcontent-%COMP%]{font-weight:700;color:#333}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{margin-bottom:5px;border-bottom:1px solid #ccc;border-top:1px solid #ccc}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;cursor:pointer}"]})};function fn(o,t){if(o&1){let e=S();l(0,"mwd-history",3),m("recordClick",function(i){f(e);let r=p();return g(r.insertSample(i))})("backFromHistory",function(){f(e);let i=p();return g(i.showHistory$.set(!1))}),c()}}function gn(o,t){if(o&1){let e=S();l(0,"tr",14)(1,"td")(2,"input",15),m("input",function(i){let r=f(e).index,s=p(2);return g(s.updateRow(r,"tamizDiameter",i))}),c()(),l(3,"td")(4,"input",16),m("input",function(i){let r=f(e).index,s=p(2);return g(s.updateRow(r,"soilWeight",i))}),c()()()}if(o&2){let e=t.index;w("formGroupName",e)}}function _n(o,t){if(o&1){let e=S();l(0,"div",4)(1,"form",5)(2,"table")(3,"thead")(4,"tr")(5,"th"),u(6,"Di\xE1metro tamiz (mm)"),c(),l(7,"th"),u(8,"Peso de suelo (g)"),c()()(),l(9,"tbody",6),M(10,gn,5,1,"tr",7),c(),l(11,"tfoot")(12,"tr")(13,"td",8)(14,"button",9),m("click",function(){f(e);let i=p();return g(i.removeRow())}),u(15,"-"),c(),l(16,"button",9),m("click",function(){f(e);let i=p();return g(i.addRow())}),u(17,"+"),c()()()()()(),l(18,"div",10)(19,"button",9),m("click",function(){f(e);let i=p();return g(i.showHistory$.set(!0))}),u(20,"Historial"),c(),l(21,"input",11,0),m("change",function(i){f(e);let r=p();return g(r.onSelectFile(i))}),c(),l(23,"button",12),m("click",function(){f(e);let i=p();return g(i.onClickReset())}),u(24,"Limpiar"),c(),l(25,"button",9),m("click",function(){f(e);let i=Ze(22);return g(i.click())}),u(26,"Insertar csv"),c(),l(27,"button",13),m("click",function(){f(e);let i=p();return g(i.onClickSubmit())}),u(28,"Calcular"),c()()()}if(o&2){let e=p();b(),w("formGroup",e.form),b(9),w("ngForOf",e.rows().controls)}}var me=class o{formBuilder=x(ft);sampleSubmitted=new j;resetClick=new j;_inDrv=x(T);form=this.formBuilder.group({rows:this.formBuilder.array([])});rows=Je(()=>this.form.get("rows"));displayedColumns=["tamizDiameter","soilWeight"];showHistory$=W(!1);ngAfterViewInit(){this.addRow(),this.addRow()}updateRow(t,e,n){let i=n.target,r=i.value,s=this.rows().at(t);if(r.endsWith(".")||r.endsWith("0"))return;if(r.endsWith(",")){s.patchValue({[e]:r.replaceAll(",",".")});return}let a=Number(r);if(a===0)return;if(isNaN(a)){setTimeout(()=>i.value="",100);return}s.patchValue({[e]:a});let d=this.rows().length>1&&this.rows().at(this.rows().length-2).valid,h=t===this.rows().length-1;d&&h&&this.addRow()}addRow(){this.rows().push(this._createRowFormGroup())}removeRow(){this.rows().removeAt(this.rows().length-1)}_removeRows(){this.rows().clear()}onClickSubmit(){let t=this._castUIToSample();this.sampleSubmitted.emit(t)}_castUIToSample(){let t=new Map;return this.rows().controls.forEach((e,n)=>{e.valid&&t.set(n,e.value)}),t}static numberValidators=[Z.required,Z.min(0),Z.max(100),Z.pattern(/^\d{1,8}(\.\d{1,8})?$/)];_createRowFormGroup(){return this.formBuilder.group({tamizDiameter:["",[...o.numberValidators]],soilWeight:["",o.numberValidators]})}insertSample(t){this.onClickReset(!1),t.forEach(e=>{let n=this.formBuilder.group({tamizDiameter:[e.tamizDiameter,[...o.numberValidators]],soilWeight:[e.soilWeight,o.numberValidators]});this.rows().push(n)}),this.onClickSubmit()}onClickReset(t=!0){this._removeRows(),t&&(this.addRow(),this.addRow()),this.resetClick.emit()}async onSelectFile(t){let e=t.target.files[0],n=await this._inDrv.parseFileToSamples(e);this.insertSample(n)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["app-mwd-samples"]],outputs:{sampleSubmitted:"sampleSubmitted",resetClick:"resetClick"},decls:2,vars:2,consts:[["fileInput",""],[3,"recordClick","backFromHistory",4,"ngIf"],["class","table-container",4,"ngIf"],[3,"recordClick","backFromHistory"],[1,"table-container"],[3,"formGroup"],["formArrayName","rows"],[3,"formGroupName",4,"ngFor","ngForOf"],["colspan","2"],["mat-raised-button","",3,"click"],[1,"button-container"],["hidden","","type","file","accept",".csv",3,"change"],["mat-raised-button","","color","accent",3,"click"],["mat-flat-button","","color","primary",3,"click"],[3,"formGroupName"],["formControlName","tamizDiameter","type","text","inputmode","numeric",3,"input"],["formControlName","soilWeight","type","text","inputmode","numeric",3,"input"]],template:function(e,n){e&1&&M(0,fn,1,0,"mwd-history",1)(1,_n,29,2,"div",2),e&2&&(w("ngIf",n.showHistory$()),b(),w("ngIf",n.showHistory$()===!1))},dependencies:[B,ie,oe,dt,at,lt,ct,pt,ht,mt,ut,z,pe],styles:[".table-container[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden;display:flex;justify-content:center;margin-bottom:1rem}@media (width <= 450px){.table-container[_ngcontent-%COMP%]{flex-direction:column}}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:280px;border-collapse:collapse}@media (width < 450px){.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin:0 auto}}@media (width >= 450px){.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-right:1rem}}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:4px 8px;text-align:center}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-wrap:wrap;background-color:#f5f5f5;font-weight:700}.table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;column-gap:1rem;row-gap:1rem;flex-wrap:wrap;justify-content:center;gap:8px;margin-top:1rem;justify-content:start}@media (width <= 450px){.table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{flex-direction:row}}.table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:200px;margin:0 auto}"]})};var yn=()=>[import("./chunk-3Y4QELAE.js").then(o=>o.MwdResultsComponent)];function vn(o,t){if(o&1){let e=S();l(0,"mwd-results",7),m("downloadClick",function(){f(e);let i=p();return g(i.downloadCsv())}),c()}if(o&2){let e=p();w("results",e.results)}}var ue=class o{results=W(null);samples;dialog=x(yt);_ourDrv=x(N);_inDrv=x(T);_historySrv=x(F);onSubmitSample(t){this.samples=t;let e=this._inDrv.resolveSamples(t);this._addToHistory(t,e),this.results.set(e)}_addToHistory(t,e){let n={sample:t,result:e.MWDTotal};this._historySrv.addSamplesRecord(n)}downloadCsv(){let t=this.results();if(!t||!this.samples)throw new Error("Aun no se puede generar csv");this._ourDrv.resultsToCsv(t,this.samples)}async openDialog(){let t=await import("./chunk-E5RRH5YO.js"),e=Object.values(t)[0];this.dialog.open(e).afterClosed().subscribe(i=>{console.log(`Dialog result: ${i}`)})}onResetClick(){this.samples=void 0,this.results.set(null)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["main-layout-root"]],features:[ne([F])],decls:14,vars:0,consts:[[1,"main-header"],[1,"left-header"],["src","/calc_mwd/favicon.ico","alt","AppIcon"],[1,"right-header"],["mat-button","",3,"click"],["id","calc-container"],[3,"sampleSubmitted","resetClick"],[3,"downloadClick","results"]],template:function(e,n){e&1&&(l(0,"header",0)(1,"div",1),k(2,"img",2),l(3,"h3"),u(4,"Calculadora Di\xE1metro Medio Ponderado"),c()(),l(5,"div",3)(6,"button",4),m("click",function(){return n.openDialog()}),u(7,"Ayuda"),c()()(),k(8,"hr"),l(9,"div",5)(10,"app-mwd-samples",6),m("sampleSubmitted",function(r){return n.onSubmitSample(r)})("resetClick",function(){return n.onResetClick()}),c(),M(11,vn,1,1),$e(12,11,yn),Ge(),c())},dependencies:[B,z,me],styles:["#calc-container[_ngcontent-%COMP%]{display:flex;column-gap:1rem;margin:1rem 1rem 4rem;justify-content:space-around}.main-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.main-header[_ngcontent-%COMP%]   .left-header[_ngcontent-%COMP%]{display:flex}.main-header[_ngcontent-%COMP%]   .left-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:35px}.main-header[_ngcontent-%COMP%]   .left-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-left:5px;margin-block-start:0em;margin-block-end:0em}@media (width <= 800px){#calc-container[_ngcontent-%COMP%]{flex-direction:column}}"]})};It(ue,Tt).catch(o=>console.error(o));
