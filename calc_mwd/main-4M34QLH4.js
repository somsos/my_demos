import{a as tt,b as W,c as nt,d as it,e as ot,f as rt,g as st,h as at,i as lt,j as ct,k as G,l as j,m as dt,q as pt,r as ut,z as V}from"./chunk-C2HXTHBN.js";import{a as _e,b as Ze,c as qe,d as M,f as Xe,g as ne,h as ie,i as Ke,j as Qe,l as Je,n as ve,o as et}from"./chunk-M6ZLKIBP.js";import{A as f,B as S,Ba as a,C as ue,Ca as l,D as Ae,Da as L,Ea as x,G as m,H as h,I as X,Ia as p,J as Re,Ja as d,L as K,M as Oe,N,O as H,P as Q,Qa as Ue,R as D,Ra as u,S as Pe,Sa as fe,T as me,Ta as Be,U as ke,Ua as te,V as J,Va as ge,W as Fe,Wa as ze,X as he,Xa as $e,Y as Ne,Ya as We,Z as He,aa as z,ab as Ge,ba as w,ca as $,d as De,db as Ye,fa as ee,g as Te,ia as Le,ka as T,la as O,qa as b,ua as je,v as F,va as Ve,x as C,xa as y,y as R,z as B}from"./chunk-BYKNC7WN.js";import{a as pe,b as Ie}from"./chunk-C6Q5SG76.js";var we=class extends qe{supportsDOMEvents=!0},Ce=class o extends we{static makeCurrent(){Ze(new o)}onAndCancel(t,e,n,i){return t.addEventListener(e,n,i),()=>{t.removeEventListener(e,n,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=At();return e==null?null:Rt(e)}resetBaseElement(){Y=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Xe(document.cookie,t)}},Y=null;function At(){return Y=Y||document.querySelector("base"),Y?Y.getAttribute("href"):null}function Rt(o){return new URL(o,document.baseURI).pathname}var Ot=(()=>{class o{build(){return new XMLHttpRequest}static \u0275fac=function(n){return new(n||o)};static \u0275prov=C({token:o,factory:o.\u0275fac})}return o})(),Se=new B(""),_t=(()=>{class o{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,n){this._zone=n,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,i,r){return this._findPluginFor(n).addEventListener(e,n,i,r)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(r=>r.supports(e)),!n)throw new F(5101,!1);return this._eventNameToPlugin.set(e,n),n}static \u0275fac=function(n){return new(n||o)(f(Se),f(H))};static \u0275prov=C({token:o,factory:o.\u0275fac})}return o})(),re=class{_doc;constructor(t){this._doc=t}manager},oe="ng-app-id";function mt(o){for(let t of o)t.remove()}function ht(o,t){let e=t.createElement("style");return e.textContent=o,e}function Pt(o,t,e,n){let i=o.head?.querySelectorAll(`style[${oe}="${t}"],link[${oe}="${t}"]`);if(i)for(let r of i)r.removeAttribute(oe),r instanceof HTMLLinkElement?n.set(r.href.slice(r.href.lastIndexOf("/")+1),{usage:0,elements:[r]}):r.textContent&&e.set(r.textContent,{usage:0,elements:[r]})}function be(o,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",o),e}var vt=(()=>{class o{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,n,i,r={}){this.doc=e,this.appId=n,this.nonce=i,this.isServer=ve(r),Pt(e,n,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,n){for(let i of e)this.addUsage(i,this.inline,ht);n?.forEach(i=>this.addUsage(i,this.external,be))}removeStyles(e,n){for(let i of e)this.removeUsage(i,this.inline);n?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,n,i){let r=n.get(e);r?r.usage++:n.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,n){let i=n.get(e);i&&(i.usage--,i.usage<=0&&(mt(i.elements),n.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])mt(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[n,{elements:i}]of this.inline)i.push(this.addElement(e,ht(n,this.doc)));for(let[n,{elements:i}]of this.external)i.push(this.addElement(e,be(n,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,n){return this.nonce&&n.setAttribute("nonce",this.nonce),this.isServer&&n.setAttribute(oe,this.appId),e.appendChild(n)}static \u0275fac=function(n){return new(n||o)(f(M),f(me),f(he,8),f(J))};static \u0275prov=C({token:o,factory:o.\u0275fac})}return o})(),ye={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Me=/%COMP%/g;var yt="%COMP%",kt=`_nghost-${yt}`,Ft=`_ngcontent-${yt}`,Nt=!0,Ht=new B("",{providedIn:"root",factory:()=>Nt});function Lt(o){return Ft.replace(Me,o)}function jt(o){return kt.replace(Me,o)}function wt(o,t){return t.map(e=>e.replace(Me,o))}var se=(()=>{class o{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,n,i,r,s,c,g,_=null,v=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=i,this.removeStylesOnCompDestroy=r,this.doc=s,this.platformId=c,this.ngZone=g,this.nonce=_,this.tracingService=v,this.platformIsServer=ve(c),this.defaultRenderer=new Z(e,s,g,this.platformIsServer,this.tracingService)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===z.ShadowDom&&(n=Ie(pe({},n),{encapsulation:z.Emulated}));let i=this.getOrCreateRenderer(e,n);return i instanceof ae?i.applyToHost(e):i instanceof q&&i.applyStyles(),i}getOrCreateRenderer(e,n){let i=this.rendererByCompId,r=i.get(n.id);if(!r){let s=this.doc,c=this.ngZone,g=this.eventManager,_=this.sharedStylesHost,v=this.removeStylesOnCompDestroy,A=this.platformIsServer,I=this.tracingService;switch(n.encapsulation){case z.Emulated:r=new ae(g,_,n,this.appId,v,s,c,A,I);break;case z.ShadowDom:return new xe(g,_,e,n,s,c,this.nonce,A,I);default:r=new q(g,_,n,v,s,c,A,I);break}i.set(n.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(n){return new(n||o)(f(_t),f(vt),f(me),f(Ht),f(M),f(J),f(H),f(he),f(Ne,8))};static \u0275prov=C({token:o,factory:o.\u0275fac})}return o})(),Z=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,n,i,r){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=i,this.tracingService=r}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(ye[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(ft(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(ft(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){e.remove()}selectRootElement(t,e){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new F(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;let r=ye[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){let i=ye[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&($.DashCase|$.Important)?t.style.setProperty(e,n,i&$.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&$.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t!=null&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n,i){if(typeof t=="string"&&(t=_e().getGlobalEventTarget(this.doc,t),!t))throw new F(5102,!1);let r=this.decoratePreventDefault(n);return this.tracingService?.wrapEventListener&&(r=this.tracingService.wrapEventListener(t,e,r)),this.eventManager.addEventListener(t,e,r,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function ft(o){return o.tagName==="TEMPLATE"&&o.content!==void 0}var xe=class extends Z{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,n,i,r,s,c,g,_){super(t,r,s,g,_),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let v=i.styles;v=wt(i.id,v);for(let I of v){let k=document.createElement("style");c&&k.setAttribute("nonce",c),k.textContent=I,this.shadowRoot.appendChild(k)}let A=i.getExternalStyles?.();if(A)for(let I of A){let k=be(I,r);c&&k.setAttribute("nonce",c),this.shadowRoot.appendChild(k)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},q=class extends Z{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,n,i,r,s,c,g,_){super(t,r,s,c,g),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let v=n.styles;this.styles=_?wt(_,v):v,this.styleUrls=n.getExternalStyles?.(_)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ae=class extends q{contentAttr;hostAttr;constructor(t,e,n,i,r,s,c,g,_){let v=i+"-"+n.id;super(t,e,n,r,s,c,g,_,v),this.contentAttr=Lt(v),this.hostAttr=jt(v)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}},Vt=(()=>{class o extends re{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,i,r){return e.addEventListener(n,i,r),()=>this.removeEventListener(e,n,i,r)}removeEventListener(e,n,i,r){return e.removeEventListener(n,i,r)}static \u0275fac=function(n){return new(n||o)(f(M))};static \u0275prov=C({token:o,factory:o.\u0275fac})}return o})(),gt=["alt","control","meta","shift"],Ut={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bt={alt:o=>o.altKey,control:o=>o.ctrlKey,meta:o=>o.metaKey,shift:o=>o.shiftKey},zt=(()=>{class o extends re{constructor(e){super(e)}supports(e){return o.parseEventName(e)!=null}addEventListener(e,n,i,r){let s=o.parseEventName(n),c=o.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_e().onAndCancel(e,s.domEventName,c,r))}static parseEventName(e){let n=e.toLowerCase().split("."),i=n.shift();if(n.length===0||!(i==="keydown"||i==="keyup"))return null;let r=o._normalizeKey(n.pop()),s="",c=n.indexOf("code");if(c>-1&&(n.splice(c,1),s="code."),gt.forEach(_=>{let v=n.indexOf(_);v>-1&&(n.splice(v,1),s+=_+".")}),s+=r,n.length!=0||r.length===0)return null;let g={};return g.domEventName=i,g.fullKey=s,g}static matchEventFullKeyCode(e,n){let i=Ut[e.key]||e.key,r="";return n.indexOf("code.")>-1&&(i=e.code,r="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),gt.forEach(s=>{if(s!==i){let c=Bt[s];c(e)&&(r+=s+".")}}),r+=i,r===n)}static eventCallback(e,n,i){return r=>{o.matchEventFullKeyCode(r,e)&&i.runGuarded(()=>n(r))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(n){return new(n||o)(f(M))};static \u0275prov=C({token:o,factory:o.\u0275fac})}return o})();function Ct(o,t){return Ge(pe({rootComponent:o},$t(t)))}function $t(o){return{appProviders:[...qt,...o?.providers??[]],platformProviders:Zt}}function Wt(){Ce.makeCurrent()}function Gt(){return new Q}function Yt(){return Pe(document),document}var Zt=[{provide:J,useValue:Je},{provide:ke,useValue:Wt,multi:!0},{provide:M,useFactory:Yt,deps:[]}];var qt=[{provide:Ae,useValue:"root"},{provide:Q,useFactory:Gt,deps:[]},{provide:Se,useClass:Vt,multi:!0,deps:[M]},{provide:Se,useClass:zt,multi:!0,deps:[M]},se,vt,_t,{provide:ee,useExisting:se},{provide:et,useClass:Ot,deps:[]},[]];var Xt="@",Kt=(()=>{class o{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=S(K);loadingSchedulerFn=S(Qt,{optional:!0});_engine;constructor(e,n,i,r,s){this.doc=e,this.delegate=n,this.zone=i,this.animationType=r,this.moduleImpl=s}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-LK5NH4JX.js").then(i=>i),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(e):n=e(),n.catch(i=>{throw new F(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:r})=>{this._engine=i(this.animationType,this.doc);let s=new r(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(e,n){let i=this.delegate.createRenderer(e,n);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let r=new Ee(i);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let c=s.createRenderer(e,n);r.use(c),this.scheduler??=this.injector.get(Oe,null,{optional:!0}),this.scheduler?.notify(10)}).catch(s=>{r.use(i)}),r}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(n){Le()};static \u0275prov=C({token:o,factory:o.\u0275fac})}return o})(),Ee=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,n,i){this.delegate.insertBefore(t,e,n,i)}removeChild(t,e,n){this.delegate.removeChild(t,e,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,i){this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){this.shouldReplay(e)&&this.replay.push(i=>i.setProperty(t,e,n)),this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n,i){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,n,i)),this.delegate.listen(t,e,n,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(Xt)}},Qt=new B("");function St(o="animations"){return He("NgAsyncAnimations"),ue([{provide:ee,useFactory:(t,e,n)=>new Kt(t,e,n,o),deps:[M,se,H]},{provide:Fe,useValue:o==="noop"?"NoopAnimations":"BrowserAnimations"}])}var bt={providers:[We(),St("noop")]};var U=class o{coreLoaded=D(!1);static CalcMwdModule;async startCoreModuleLoading(){o.CalcMwdModule=await import("./chunk-AXRGMR3U.js").then(t=>t.CalcMwdModule)}getCoreOutputDriver(){return new o.CalcMwdModule().getOutputDriver()}getCoreInputDriver(){return new o.CalcMwdModule().getInputDriver()}static \u0275fac=function(e){return new(e||o)};static \u0275prov=C({token:o,factory:o.\u0275fac,providedIn:"root"})};var P=class o{_allSamples$=new De([this.getExample()]);addSamplesRecord(t){t.createdAt===void 0&&(t.createdAt=new Date),!this._doesSampleExist(t)&&this._allSamples$.next([...this._allSamples$.value,t])}_doesSampleExist(t){let e=t.result;return e===0||e===void 0?!0:this._allSamples$.value.some(i=>i.result===e)}getSamplesByItem(t){return this._allSamples$.value[t].sample}observeAllSamplesRecords(){return this._allSamples$.asObservable()}cleanAll(){this._allSamples$.next([this.getExample()])}cleanOne(t){let e=this._allSamples$.value;if(t<0||t>=e.length)throw new Error("Index out of bounds");e.splice(t,1),this._allSamples$.next(e)}getExample(){return{sample:new Map([[0,{tamizDiameter:8,soilWeight:0}],[1,{tamizDiameter:4,soilWeight:3.4}],[2,{tamizDiameter:2,soilWeight:21.26}],[3,{tamizDiameter:1,soilWeight:34.73}],[4,{tamizDiameter:.5,soilWeight:35.69}],[5,{tamizDiameter:.25,soilWeight:31.31}],[6,{tamizDiameter:.053,soilWeight:38.26}],[7,{tamizDiameter:0,soilWeight:25.37}]]),result:.953859829,createdAt:new Date("2025-04-07T18:50:00-06:00")}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=C({token:o,factory:o.\u0275fac,providedIn:"root"})};var Mt=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=O({type:o})}static{this.\u0275inj=R({})}}return o})();var Et=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=O({type:o})}static{this.\u0275inj=R({imports:[G,Mt,pt]})}}return o})();var It=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=O({type:o})}static{this.\u0275inj=R({imports:[G,G]})}}return o})();function dn(o,t){if(o&1){let e=x();X(),a(0,"svg",16),p("click",function(i){m(e);let r=d().index;return d(3).onClickCleanOne(r),h(i.stopPropagation())}),L(1,"path",17),l()}}function pn(o,t){if(o&1){let e=x();a(0,"div",13)(1,"div",14),p("click",function(){let i=m(e).index,r=d(3);return h(r.onRecordClick(i))}),a(2,"div",11),u(3),ge(4,"date"),l(),a(5,"div"),u(6),b(7,dn,2,0,"svg",15),l(),a(8,"div"),u(9),l()()()}if(o&2){let e=t.$implicit,n=t.index;w(3),fe($e(4,4,e.createdAt,"short")),w(3),Be(" ",n===0?"Ejemplo":n," "),w(),y("ngIf",n!==0),w(2),fe(e.result)}}function un(o,t){if(o&1&&(a(0,"div",9)(1,"div",10)(2,"div",11),u(3,"Agregado"),l(),a(4,"div"),u(5,"Nombre"),l(),a(6,"div"),u(7,"Resultado"),l()(),b(8,pn,10,7,"div",12),l()),o&2){let e=d().ngIf;w(8),y("ngForOf",e)}}function mn(o,t){if(o&1){let e=x();a(0,"div",1)(1,"div",2)(2,"button",3),p("click",function(){m(e);let i=d();return h(i.onClickBackFromHistory())}),X(),a(3,"svg",4),L(4,"path",5),l()(),Re(),a(5,"h4"),u(6,"Historial"),l()(),b(7,un,9,1,"div",6),a(8,"div",7)(9,"button",8),p("click",function(){m(e);let i=d();return h(i.onClickBackFromHistory())}),u(10,"Regresar"),l()()()}if(o&2){let e=t.ngIf;w(7),y("ngIf",e.length>0)}}var le=class o{recordClick=new N;backFromHistory=new N;_srv=S(P);panelOpenState=D(!1);history$=this._srv.observeAllSamplesRecords().pipe(Te(t=>t.map(e=>e)));onClickClean(){this._srv.cleanAll()}onClickCleanOne(t){this._srv.cleanOne(t)}onRecordClick(t){let e=this._srv.getSamplesByItem(t);this.recordClick.emit(e),this.backFromHistory.emit()}onClickBackFromHistory(){this.backFromHistory.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=T({type:o,selectors:[["mwd-history"]],outputs:{recordClick:"recordClick",backFromHistory:"backFromHistory"},decls:2,vars:3,consts:[["class","history-container",4,"ngIf"],[1,"history-container"],[1,"history-header"],["mat-button","",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","26","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-left"],["fill-rule","evenodd","d","M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"],["class","history-list",4,"ngIf"],[1,"btn-group"],["mat-raised-button","",3,"click"],[1,"history-list"],[1,"history-row","history-itemHeader"],[2,"min-width","140px"],["class","history-row-container",4,"ngFor","ngForOf"],[1,"history-row-container"],[1,"history-row","history-item",3,"click"],["style","margin-left: 5px;","xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-trash3","viewBox","0 0 16 16",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash3",2,"margin-left","5px",3,"click"],["d","M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"]],template:function(e,n){e&1&&(b(0,mn,11,1,"div",0),ge(1,"async")),e&2&&y("ngIf",ze(1,1,n.history$))},dependencies:[V,ne,ie,j,Ke,Qe,Et,dt,It],styles:[".history-container[_ngcontent-%COMP%]{padding:1rem;background-color:#f9f9f9;max-width:500px;margin:0 auto;margin-bottom:1rem}@media (width >= 800px){.history-container[_ngcontent-%COMP%]{min-width:400px}}.history-container[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]{display:flex;justify-items:center;height:50px}.history-container[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:min-content}.history-container[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:#333;height:min-content}.history-container[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{gap:.5rem}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;max-height:300px;overflow-y:auto;border:1px solid #ccc;border-radius:8px;background-color:#fff}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-row[_ngcontent-%COMP%]{padding:5px;display:flex;justify-content:space-between}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-last-of-type(1){text-align:right}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-itemHeader[_ngcontent-%COMP%]{font-weight:700;color:#333}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{margin-bottom:5px;border-bottom:1px solid #ccc;border-top:1px solid #ccc}.history-container[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;cursor:pointer}"]})};function hn(o,t){if(o&1){let e=x();a(0,"mwd-history",3),p("recordClick",function(i){m(e);let r=d();return h(r.insertSample(i))})("backFromHistory",function(){m(e);let i=d();return h(i.showHistory$.set(!1))}),l()}}function fn(o,t){if(o&1){let e=x();a(0,"tr",15)(1,"td")(2,"input",16),p("input",function(i){let r=m(e).index,s=d(2);return h(s.updateRow(r,"tamizDiameter",i))}),l()(),a(3,"td")(4,"input",17),p("input",function(i){let r=m(e).index,s=d(2);return h(s.updateRow(r,"soilWeight",i))}),l()()()}if(o&2){let e=t.index;y("formGroupName",e)}}function gn(o,t){if(o&1){let e=x();a(0,"div",4)(1,"form",5)(2,"table")(3,"thead")(4,"tr")(5,"th"),u(6,"Di\xE1metro tamiz (mm)"),l(),a(7,"th"),u(8,"Peso de suelo (g)"),l()()(),a(9,"tbody",6),b(10,fn,5,1,"tr",7),l(),a(11,"tfoot")(12,"tr")(13,"td",8)(14,"button",9),p("click",function(){m(e);let i=d();return h(i.removeRow())}),u(15,"-"),l(),a(16,"button",9),p("click",function(){m(e);let i=d();return h(i.addRow())}),u(17,"+"),l()()()()()(),a(18,"div",10)(19,"button",9),p("click",function(){m(e);let i=d();return h(i.showHistory$.set(!0))}),u(20,"Historial"),l(),a(21,"input",11,0),p("change",function(i){m(e);let r=d();return h(r.onSelectFile(i))}),l(),a(23,"button",12),p("click",function(){m(e);let i=d();return h(i.onClickReset())}),u(24,"Limpiar"),l(),a(25,"button",13),p("click",function(){m(e);let i=Ue(22);return h(i.click())}),u(26,"Insertar csv"),l(),a(27,"button",14),p("click",function(){m(e);let i=d();return h(i.onClickSubmit())}),u(28,"Calcular"),l()()()}if(o&2){let e=d();w(),y("formGroup",e.form),w(9),y("ngForOf",e.rows().controls),w(15),y("disabled",!e.coreLoaded()),w(2),y("disabled",!e.coreLoaded())}}var ce=class o{formBuilder=S(ct);_loader=S(U);coreLoaded;sampleSubmitted=new N;resetClick=new N;form=this.formBuilder.group({rows:this.formBuilder.array([])});rows=Ye(()=>this.form.get("rows"));displayedColumns=["tamizDiameter","soilWeight"];showHistory$=D(!1);ngAfterViewInit(){this.addRow(),this.addRow()}updateRow(t,e,n){let i=n.target,r=i.value;if(r.endsWith(".")||r.endsWith("0"))return;let s=Number(r);if(s===0)return;if(isNaN(s)){setTimeout(()=>i.value="",100);return}this.rows().at(t).patchValue({[e]:s});let g=this.rows().length>1&&this.rows().at(this.rows().length-2).valid,_=t===this.rows().length-1;g&&_&&this.addRow()}addRow(){this.rows().push(this._createRowFormGroup())}removeRow(){this.rows().removeAt(this.rows().length-1)}_removeRows(){this.rows().clear()}onClickSubmit(){let t=this._castUIToSample();this.sampleSubmitted.emit(t)}_castUIToSample(){let t=new Map;return this.rows().controls.forEach((e,n)=>{e.valid&&t.set(n,e.value)}),t}static numberValidators=[W.required,W.min(0),W.max(100),W.pattern(/^\d{1,8}(\.\d{1,8})?$/)];_createRowFormGroup(){return this.formBuilder.group({tamizDiameter:["",[...o.numberValidators]],soilWeight:["",o.numberValidators]})}insertSample(t){this.onClickReset(!1),t.forEach(e=>{let n=this.formBuilder.group({tamizDiameter:[e.tamizDiameter,[...o.numberValidators]],soilWeight:[e.soilWeight,o.numberValidators]});this.rows().push(n)}),this.onClickSubmit()}onClickReset(t=!0){this._removeRows(),t&&(this.addRow(),this.addRow()),this.resetClick.emit()}async onSelectFile(t){let e=t.target.files[0],i=await this._loader.getCoreInputDriver().parseFileToSamples(e);this.insertSample(i)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=T({type:o,selectors:[["app-mwd-samples"]],inputs:{coreLoaded:"coreLoaded"},outputs:{sampleSubmitted:"sampleSubmitted",resetClick:"resetClick"},decls:2,vars:2,consts:[["fileInput",""],[3,"recordClick","backFromHistory",4,"ngIf"],["class","table-container",4,"ngIf"],[3,"recordClick","backFromHistory"],[1,"table-container"],[3,"formGroup"],["formArrayName","rows"],[3,"formGroupName",4,"ngFor","ngForOf"],["colspan","2"],["mat-raised-button","",3,"click"],[1,"button-container"],["hidden","","type","file","accept",".csv",3,"change"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","",3,"click","disabled"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"formGroupName"],["formControlName","tamizDiameter","type","text","inputmode","numeric",3,"input"],["formControlName","soilWeight","type","text","inputmode","numeric",3,"input"]],template:function(e,n){e&1&&b(0,hn,1,0,"mwd-history",1)(1,gn,29,4,"div",2),e&2&&(y("ngIf",n.showHistory$()),w(),y("ngIf",n.showHistory$()===!1))},dependencies:[V,ne,ie,ot,tt,nt,it,rt,lt,st,at,j,le],styles:[".table-container[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden;display:flex;justify-content:center;margin-bottom:1rem}@media (width <= 450px){.table-container[_ngcontent-%COMP%]{flex-direction:column}}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:280px;border-collapse:collapse}@media (width < 450px){.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin:0 auto}}@media (width >= 450px){.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-right:1rem}}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:4px 8px;text-align:center}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-wrap:wrap;background-color:#f5f5f5;font-weight:700}.table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;column-gap:1rem;row-gap:1rem;flex-wrap:wrap;justify-content:center;gap:8px;margin-top:1rem;justify-content:start}@media (width <= 450px){.table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{flex-direction:row}}.table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:200px;margin:0 auto}"]})};var _n=()=>[import("./chunk-ERYXBW2V.js").then(o=>o.MwdResultsComponent)];function vn(o,t){if(o&1){let e=x();a(0,"mwd-results",4),p("downloadClick",function(){m(e);let i=d();return h(i.downloadCsv())}),l()}if(o&2){let e=d();y("results",e.results)}}var de=class o{results=D(null);samples;dialog=S(ut);loader=S(U);_ourDrv;_inDrv;_historySrv=S(P);ngAfterContentInit(){this.loader.startCoreModuleLoading().then(()=>{this.loader.coreLoaded.set(!0),this._ourDrv=this.loader.getCoreOutputDriver(),this._inDrv=this.loader.getCoreInputDriver()})}onSubmitSample(t){this.samples=t;let e=this._inDrv.resolveSamples(t);this._addToHistory(t,e),this.results.set(e)}_addToHistory(t,e){let n={sample:t,result:e.MWDTotal};this._historySrv.addSamplesRecord(n)}downloadCsv(){let t=this.results();if(!t||!this.samples)throw new Error("Aun no se puede generar csv");this._ourDrv.resultsToCsv(t,this.samples)}async openDialog(){let t=await import("./chunk-6SG7HUOR.js"),e=Object.values(t)[0];this.dialog.open(e).afterClosed().subscribe(i=>{console.log(`Dialog result: ${i}`)})}onResetClick(){this.samples=void 0,this.results.set(null)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=T({type:o,selectors:[["main-layout-root"]],features:[te([P])],decls:11,vars:2,consts:[[1,"main-header"],["mat-button","",3,"click","disabled"],["id","calc-container"],[3,"sampleSubmitted","resetClick","coreLoaded"],[3,"downloadClick","results"]],template:function(e,n){e&1&&(a(0,"header",0)(1,"h3"),u(2,"Calculadora Di\xE1metro Medio Ponderado"),l(),a(3,"button",1),p("click",function(){return n.openDialog()}),u(4," Ayuda "),l()(),L(5,"hr"),a(6,"div",2)(7,"app-mwd-samples",3),p("sampleSubmitted",function(r){return n.onSubmitSample(r)})("resetClick",function(){return n.onResetClick()}),l(),b(8,vn,1,1),je(9,8,_n),Ve(),l()),e&2&&(w(3),y("disabled",!n.loader.coreLoaded()),w(4),y("coreLoaded",n.loader.coreLoaded))},dependencies:[V,j,ce],styles:["#calc-container[_ngcontent-%COMP%]{display:flex;column-gap:1rem;margin:1rem 1rem 4rem;justify-content:space-around}.main-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.main-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-left:5px;margin-block-start:0em;margin-block-end:0em}@media (width <= 800px){#calc-container[_ngcontent-%COMP%]{flex-direction:column}}"]})};Ct(de,bt).catch(o=>console.error(o));
